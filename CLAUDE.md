# Инструкции для Claude Code

Этот документ содержит руководство по работе с Claude Code в контексте SRD-метода и интеграции с First Principles Framework (FPF).

## Общие принципы работы

### 1. Понимание контекста SRD

При работе с проектом Claude должен учитывать структуру SRD:
- **Система** (Management, Supersystem, TargetSystem, CreationSystem)
- **Роль** (Meaning, Architecture, Operations)
- **Документ** относится к конкретной ячейке матрицы

### 2. Интеграция с FPF

First Principles Framework (`.fpf/`) содержит фундаментальные принципы проекта.

**Перед началом работы:**
1. Прочитай `.fpf/INDEX.md`
2. Определи релевантные принципы для задачи
3. Применяй принципы при создании решений

**При создании нового кода/документа:**
- Проверь соответствие принципам из FPF
- Если появляется новый принцип — предложи добавить в `.fpf/INDEX.md`
- Избегай противоречий с существующими принципами

### 3. Работа с документами SRD

#### Создание документа

```yaml
---
system: "TargetSystem"           # или Management/Supersystem/CreationSystem
role: "Architecture"             # или Meaning/Operations
title: "Название документа"
date: "2026-01-07"
tags: [tag1, tag2]
related:                         # Связанные документы
  - path/to/related/doc.md
fpf_principles:                  # Применяемые принципы
  - principle-name
---

# Содержание документа
```

#### Размещение документа

Документ должен быть размещён в соответствующей папке:
- `content/{N}.{System}/{N}.{M}.{Role}/document.md`

Примеры:
- `content/2.TargetSystem/2.2.Architecture/database-schema.md`
- `content/0.Management/0.1.Meaning/project-vision.md`

### 4. Навигация по проекту

**При получении задачи:**
1. Определи, к какой системе и роли относится задача
2. Найди существующие документы в соответствующей папке
3. Проверь связанные документы через `related` в frontmatter
4. Изучи релевантные принципы из `.fpf/INDEX.md`

**При создании связей:**
- Указывай связанные документы в `related`
- Поддерживай двунаправленные связи
- Документируй причину связи в комментариях

### 5. Рефакторинг и улучшения

**Признаки необходимости рефакторинга:**
- Документ охватывает несколько ячеек матрицы → разделить
- Дублирование информации → создать общий документ
- Противоречия между документами → синхронизировать
- Нарушение принципов FPF → привести в соответствие

**Процесс рефакторинга:**
1. Проверь все `related` связи
2. Обнови frontmatter в затронутых документах
3. Сохрани историю изменений в commit message
4. Обнови `.fpf/INDEX.md` если принципы изменились

## Команды для Claude

### Анализ структуры

```
Проанализируй структуру SRD проекта и покажи:
- Заполненность матрицы (какие ячейки есть)
- Отсутствующие ключевые документы
- Связность между документами
```

### Создание документа

```
Создай документ в ячейке [System]/[Role] на тему [Topic]
с применением принципов: [principle1, principle2]
```

### Проверка соответствия FPF

```
Проверь соответствие документа [path] принципам FPF
и предложи улучшения
```

### Рефакторинг

```
Проведи рефакторинг документов в [path] согласно SRD-методу
с сохранением всех связей и соответствием FPF
```

## Правила кодирования

### 1. Минимализм
- Создавай только необходимый код/документы
- Избегай over-engineering
- Предпочитай простые решения

### 2. Практичность
- Код должен решать реальную задачу
- Документация должна быть применимой
- Примеры должны быть рабочими

### 3. Системность
- Учитывай место компонента в SRD-матрице
- Поддерживай связи между компонентами
- Следуй принципам FPF

### 4. Ясность
- Используй понятные имена
- Комментируй сложную логику
- Документируй архитектурные решения

## Примеры работы

### Пример 1: Создание архитектурного документа

**Задача:** Описать архитектуру API

**Действия Claude:**
1. Система: TargetSystem (это продукт)
2. Роль: Architecture (описание структуры)
3. Путь: `content/2.TargetSystem/2.2.Architecture/api-architecture.md`
4. FPF: проверить принципы API-дизайна
5. Создать документ с frontmatter
6. Связать с документами о требованиях (Meaning) и реализации (Operations)

### Пример 2: Добавление принципа в FPF

**Задача:** Обнаружен важный принцип безопасности

**Действия Claude:**
1. Открыть `.fpf/INDEX.md`
2. Добавить принцип в соответствующую категорию
3. Указать обоснование и примеры применения
4. Обновить связанные документы, добавив ссылку на принцип

### Пример 3: Анализ задачи разработки

**Задача:** Реализовать новую функцию

**Действия Claude:**
1. **Meaning**: Проверить требования в `2.1.Meaning/`
2. **Architecture**: Изучить архитектуру в `2.2.Architecture/`
3. **Operations**: Посмотреть процессы в `3.3.Operations/`
4. **FPF**: Применить релевантные принципы
5. Реализовать с учётом всех аспектов
6. Обновить документацию во всех затронутых ролях

## Интеграция с workflow

### Pre-commit
- Проверка валидности YAML frontmatter
- Проверка существования связанных документов
- Проверка соответствия структуре папок

### Code Review
- Соответствие принципам FPF
- Правильное размещение в SRD-матрице
- Наличие связей с релевантными документами

### Документирование
- Обязательный frontmatter для всех `.md` файлов в `content/`
- Актуальность `.fpf/INDEX.md`
- Двунаправленность связей между документами

## Полезные ссылки

- [README.md](README.md) — описание SRD-метода
- [CONTRIBUTING.md](CONTRIBUTING.md) — правила участия в проекте
- [.fpf/INDEX.md](.fpf/INDEX.md) — индекс принципов FPF

## Обратная связь

При работе с SRD-структурой Claude должен:
- Сообщать о найденных несоответствиях
- Предлагать улучшения структуры
- Указывать на отсутствующие важные документы
- Помогать поддерживать целостность системы
